docker.list_containers "running" {
  only_running = true
}

loki.write "default" {
  endpoint {
    url = "http://loki:3100/loki/api/v1/push"
  }
}

docker.logs "container_logs" {
  targets    = docker.list_containers.running
  forward_to = [loki.process.process_logs.receiver]
}

loki.process "process_logs" {
  forward_to = [loki.write.default.receiver]
  stage.json {
    expressions = {
      level   = "level",
      message = "msg",
    }
  }
}

